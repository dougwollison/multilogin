/* globals jQuery, multiloginL10n */
jQuery(function(a){
// Update the text of the message with the appicable status
function o(t,s){var n=t.data("domain"),a=multiloginL10n[s].replace("%s","<strong>"+n+"</strong>");t.find(".text").html(a)}
// Handle the result; update the message and check if done
function i(t,s){var n;c++,"success"===s?d++:g++,
// Flag and print the message
t.addClass("result-"+s),o(t,s),
// Call done() if we've completed all URLs
c>=r.length&&l()}
// When done, set overal status (all success, all error, mixed warning)
function l(){d===c?e.addClass("status-success"):g===c?e.addClass("status-error"):e.addClass("status-warning")}
// Parse the template to real element
// Get the URL scripts, the notice box, and the message template
var r=a(".multilogin-auth-url"),e=a(".multilogin-notice"),u=a("#multilogin_message_template");
// Move the notice box to just above the login form
a("body").hasClass("login")&&e.insertBefore("#loginform");
// Counts of completed, successfull, and failed attempts
var c=0,d=0,g=0;u=a(u.html()),
// Run through each URL and initiate it
r.each(function(){
// Get the URL for the [src] and the domain from it
var t=a(this).data("url"),s=t.replace(/https?:\/\/(.+?)\/.*/,"$1"),n=u.clone().data("domain",s);
// Set the load and error event
this.onload=function(){i(n,"success")},this.onerror=function(){i(n,"error")},
// Set the source to trigger the loading of the URL
this.src=t,
// Add to the message box, initialize with waiting message
n.appendTo(e),o(n,"waiting")}),
// Show the notice box if there are URLs to run through
0<r.length&&e.show()});
//# sourceMappingURL=authenticate.min.js.map